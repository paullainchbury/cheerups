<!DOCTYPE html>
<html>
<head>
  <title>Cheerupapp</title>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

  <header>
    <div class="container sixteen columns" id="nav">

      <h1>Cheerups</h1>

        <ul>

          <% if current_user %>
            <li><%=link_to "Flagged cheerups", flagged_cheerups_path if can? :flagged_cheerups, Cheerup %></li>
            <li><%= current_user.email %></li>
            <%= image_tag("#{current_user.image}" + '?type=small') if current_user.image %>
            <li><%= link_to 'logout', destroy_user_session_path, method: :delete %></li>

          <% else %>
            <li><%= link_to 'sign in', new_user_session_path %><li>
            <li><%= link_to 'register', new_user_registration_path %><li>
            <li><%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) %><li>

          <% end %>
          <button><%= link_to 'New Cheerup', new_cheerup_path %></button>
        </ul>

        

      </div>
      <div id="notices">
        <p class="notice"><%= notice %></p>
        <p class="alert"><%= alert %></p>


      </div>
    </header>




  <div class="container" >

    
    <div id="sidebar" class="container four columns">
      <div id="leaderboard">
        <h2>Leaderboard</h2>
          <table>
            <tr>
              <th>Email</th>
              <th>Points</th>
            </tr>
            <% @users.first(5).each do |user| %>
            <tr>
              <td><%= user.email %></td>
              <td><%= user.total_votes_received %></td>
            </tr>
            <% end %>
          </table>
        </div>

      <div id="activities">
        <h2>Activities</h2>
          <% @activities.first(5).each do |activity| %>
          <%= ActivityPresenter.new(activity, self).render_activity %>
          <% end %>
      </div>
    </div>

    <div class="container twelve columns ">
      <%= yield %>
    </div>

  </div>
</body>
</html>
